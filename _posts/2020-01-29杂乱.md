---
date: 2020-01-29 20:46
status: public
title: 2020-01-29杂乱
---

# 坑
- ImageIO有时候没有输出，可能是因为不支持jpg。
- Nginx有时显示符号错误或莫名错误时，注意检查文件编码格式是不是utf-8
- Nginx上传限制client_max_body_size 10m;
client_body_buffer_size  10m;
- 400时也要注意有没有指定name。在layui上传图片时，设定field。
- Java做图像时，一定要gc掉开的数组，否则一下就OOM了
- Integer等装箱类型也会带来大量内存消耗，要注意
- idea 搜索 VisualVM插件进行内存调试
- jpg会压缩图片带来噪点，像素图一律用png即可，也不会太大
- -XX:MaxPermSize=256m
- cookie记得设置path为根目录"/"，否则不会共用。cookie不用重复add。 

# netstat用法
1. netstat -a 显示所有
2. netstat -at -t 所有tcp -u是udp
2. netstat -ant -n 禁用反向域名解析（不看域名只看ip）
2. netstat -tnl -l 
2. netstat -nlpt -p 进程信息
2. netstat -ltpe -ep 进程信息与用户名
2. netstat -s 统计收发包
2. netstat -rn 打印内核路由信息
2. netstat -i 打印网络信息 -ei 用户友好信息
2. netstat -ct 持续输出
2. netstat -g 会输出 IPv4 和 IPv6 的多播组信息
2. netstat -atnp | grep ESTA ESTABLISHED
2. watch -d -n0 "netstat -atnp | grep ESTA" 监视 active 状态的连接
2. netstat -aple | grep ntp 查看ntp服务是否在运行

# ubuntu 防火墙 ufw
cat /etc/ufw/user.rules 
ufw enable/disable  # 打开/关闭ufw
ufw status  # 查看已经定义的ufw规则
ufw default allow/deny  # 外来访问默认允许/拒绝
ufw allow/deny 20  # 允许/拒绝 访问20端口,20后可跟/tcp或/udp，表示tcp或udp封包。
ufw allow/deny servicename  # ufw从/etc/services中找到对应service的端口，进行过滤。
ufw allow proto tcp from 10.0.1.0/10 to 本机ip port 25  # 允许自10.0.1.0/10的tcp封包访问本机的25端口。
ufw delete allow/deny 20  # 删除以前定义的"允许/拒绝访问20端口"的规则
ufw allow 2379 from 220.170.170.94 
ufw allow from 220.170.58.41 to any port 2375
# css html js
## 图像缩放按像素(邻近)模式
```css
img { 
    image-rendering: optimizeSpeed;             /* STOP SMOOTHING, GIVE ME SPEED  */
    image-rendering: -moz-crisp-edges;          /* Firefox                        */
    image-rendering: -o-crisp-edges;            /* Opera                          */
    image-rendering: -webkit-optimize-contrast; /* Chrome (and eventually Safari) */
    image-rendering: pixelated; /* Chrome */
    image-rendering: optimize-contrast;         /* CSS3 Proposed                  */
    -ms-interpolation-mode: nearest-neighbor;   /* IE8+                           */

}
```
## 图片不缓存技巧
<img src="picture.jpg?1222259157.415" alt="">
Generate time by Javascript with performance.now() or by Python with time.time()